<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ν¬μ ν¬νΈν΄λ¦¬μ¤ λ¶„μ„ v2</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>  <!-- β… μ΄λ―Έ μμ -->
    <link rel="stylesheet" href="/static/index.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>π¤– AI ν¬μ ν¬νΈν΄λ¦¬μ¤ λ¶„μ„ μ‹μ¤ν…</h1>
            <p>κ³ λ„ν™”λ λ°μ΄ν„° κΈ°λ° ν¬μ μ „λµ λ¶„μ„</p>
        </div>
        
        <div class="main-content">
            <!-- μ…λ ¥ ν¨λ„ -->
            <div class="panel input-panel">
                <h2>π“ ν¬μ μ΅°κ±΄ μ…λ ¥</h2>
                
                <form id="portfolioForm">
                    <!-- 0. AI μ—”μ§„ λ° λ¨λΈ μ„ νƒ -->
                    <div class="form-group">
                        <label>π¤– AI λ¶„μ„ μ—”μ§„</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div class="ai-engine-option">
                                <input type="radio" id="anthropic" name="aiEngine" value="anthropic" checked>
                                <label for="anthropic" class="engine-label">
                                    <div class="engine-title">π Anthropic</div>
                                    <div class="engine-desc">λΉ λ¥΄κ³  μ•μ •μ μΈ λ¶„μ„</div>
                                </label>
                            </div>
                            <div class="ai-engine-option">
                                <input type="radio" id="langgraph" name="aiEngine" value="langgraph">
                                <label for="langgraph" class="engine-label">
                                    <div class="engine-title">β΅ LangGraph</div>
                                    <div class="engine-desc">κ³ κΈ‰ κ·Έλν”„ κΈ°λ° λ¶„μ„</div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- λ¨λΈ μ„ νƒ -->
                        <label>π― λ¶„μ„ λ¨λΈ</label>
                        <select id="modelSelect" name="model" style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #e9ecef; font-size: 1em;">
                            <option value="">λ¨λΈμ„ λ΅λ”© μ¤‘...</option>
                        </select>
                    </div>
                    
                    <!-- 1. ν¬μ μμ‚° -->
                    <div class="form-group">
                        <label>π’° μ΄ ν¬μ μμ‚° (μ›)</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="number" id="budgetInput" name="budget" value="5000000" 
                                   min="1000000" step="10000" required
                                   style="flex: 1; font-size: 1.05em; text-align: right;">
                            <span id="budgetDisplay" style="min-width: 140px; font-weight: 600; color: #667eea; text-align: right; padding: 12px 15px; background: #f8f9fa; border-radius: 8px; border: 2px solid #e9ecef; font-size: 1.1em; white-space: nowrap;">
                                5λ°±λ§μ›
                            </span>
                        </div>
                    </div>
                    
                    <!-- 2. ν¬μ λ€μƒ -->
                    <div class="form-group">
                        <label>π― ν¬μ λ€μƒ</label>
                        <div class="tabs">
                            <button type="button" class="tab active" data-tab="sectors">μ„Ήν„° μ„ νƒ</button>
                            <button type="button" class="tab" data-tab="stocks">μΆ…λ© μ„ νƒ</button>
                        </div>
                        
                        <div id="sectors-tab" class="tab-content active">
                            <div class="selection-grid" id="sectorsList"></div>
                            <div class="selected-count" id="sectorsCount">μ„ νƒ: 0κ°</div>
                        </div>
                        
                        <div id="stocks-tab" class="tab-content">
                            <div class="selection-grid" id="stocksList"></div>
                            <div class="selected-count" id="stocksCount">μ„ νƒ: 0κ°</div>
                        </div>
                    </div>
                    
                    <!-- 3. ν¬μ μ„±ν–¥ -->
                    <div class="form-group">
                        <label>β–οΈ ν¬μ μ„ν— μ„±ν–¥</label>
                        <select name="risk_profile" required>
                            <option value="μ•μ •">μ•μ • (λ‚®μ€ λ³€λ™μ„±, μ•μ „ μμ‚° μ„ νΈ)</option>
                            <option value="μ¤‘λ¦½">μ¤‘λ¦½ (κ· ν• μ΅ν ν¬νΈν΄λ¦¬μ¤)</option>
                            <option value="κ³µκ²©" selected>κ³µκ²© (λ†’μ€ μμµλ¥  μ¶”κµ¬)</option>
                        </select>
                    </div>
                    
                    <!-- 4. ν¬μ κΈ°κ°„ -->
                    <div class="form-group">
                        <label>π“… ν¬μ κΈ°κ°„</label>
                        <select name="investment_period" required>
                            <option value="λ‹¨κΈ°">λ‹¨κΈ° (3κ°μ›” μ΄ν•)</option>
                            <option value="μ¤‘κΈ°" selected>μ¤‘κΈ° (3κ°μ›”~12κ°μ›”)</option>
                            <option value="μ¥κΈ°">μ¥κΈ° (1λ…„ μ΄μƒ)</option>
                        </select>
                    </div>
                    
                    <!-- 5. μ¶”κ°€ ν”„λ΅¬ν”„νΈ -->
                    <div class="form-group">
                        <label>π’¬ μ¶”κ°€ μ”κµ¬μ‚¬ν•­ (μ„ νƒ)</label>
                        <textarea name="additional_prompt" 
                                  placeholder="μ: ESG μ μκ°€ λ†’μ€ μΆ…λ© μ°μ„ , λ°°λ‹Ή μμµ μ¤‘μ‹ λ“±"></textarea>
                    </div>
                    
                    <button type="submit" class="btn-primary" id="analyzeBtn">
                        π€ ν¬νΈν΄λ¦¬μ¤ λ¶„μ„ μ‹μ‘
                    </button>
                </form>
            </div>
            
            <!-- κ²°κ³Ό ν¨λ„ -->
            <div class="panel result-panel">
                <h2>π“ λ¶„μ„ κ²°κ³Ό</h2>
                
                <div id="emptyState" class="empty-state">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                    <h3>ν¬μ μ΅°κ±΄μ„ μ…λ ¥ν•μ„Έμ”</h3>
                    <p>AIκ°€ μµμ μ ν¬νΈν΄λ¦¬μ¤λ¥Ό λ¶„μ„ν•©λ‹λ‹¤</p>
                </div>
                
                <div id="loadingState" class="loading" style="display: none;">
                    <div class="spinner"></div>
                    <h3>AIκ°€ ν¬νΈν΄λ¦¬μ¤λ¥Ό λ¶„μ„ν•κ³  μμµλ‹λ‹¤...</h3>
                    <p style="margin-top: 10px; color: #666;">
                        λ°μ΄ν„° μμ§‘ β†’ μ μ κ³„μ‚° β†’ μµμ ν™” β†’ λ³΄κ³ μ„ μƒμ„±
                    </p>
                </div>
                
                <div id="resultContent" class="result-content"></div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>Β© 2025 AI ν¬μ ν¬νΈν΄λ¦¬μ¤ λ¶„μ„ μ‹μ¤ν…</p>
            <p class="footer-disclaimer">
                Powered by Advanced AI Technology
            </p>
        </div>
    </footer>
    
    <script src="/static/index.js"></script>
</body>
</html>
